/*! Space Frame - v0.1.0 - 2012-08-28
* https://github.com/brewster1134/jquery-space-frame
* Copyright (c) 2012 Ryan Brewster; Licensed MIT */
window.console||(window.console=function(){return this.log=function(a){},this.dir=function(a){}}),window.log=function(){log.history=log.history||[],log.history.push(arguments_);if(this.console)return console.log(Array.prototype.slice.call(arguments_))},function(a){var b,c,d;return d={init:function(b){var d;return d={speed:500},this.each(function(){var e,f,g,h,i,j,k,l,m;e=a(this),e.options=a.extend(b,d),h=e.data("space-frame");if(!h)return e.data("space-frame",{target:e}),l=e.find(".space-scrubber"),g=e.find(".space-panel"),e.panelOne=a(g.get(0)),e.panelTwo=a(g.get(1)),e.panelThree=a(g.get(2)),e.panelFour=a(g.get(3)),i=e.panelOne.add(e.panelThree),k=e.panelTwo.add(e.panelFour),m=e.panelOne.add(e.panelTwo),f=e.panelThree.add(e.panelFour),e.maxContentWidth=null,e.maxContentHeight=null,j=g.length,e.hasClass("x")?(g.length!==2&&console.warn("There should only be 2 panels for an x axis space frame!"),e.restrictAxis="x"):e.hasClass("y")&&(g.length!==2&&console.warn("There should only be 2 panels for a y axis space frame!"),e.restrictAxis="y"),e.css({width:function(){return g.each(function(){if(!a(this).is(":empty"))return e.maxContentWidth=Math.max(e.maxContentWidth,a(this).width())}),e.maxContentWidth},height:function(){return g.each(function(){if(!a(this).is(":empty"))return e.maxContentHeight=Math.max(e.maxContentHeight,a(this).height())}),e.maxContentHeight}}),l.css({display:"block",marginTop:l.height()/2*-1,marginBottom:l.height()/2*-1,marginLeft:l.width()/2*-1,marginRight:l.width()/2*-1,top:e.maxContentHeight,left:e.maxContentWidth}),g.css({clip:"rect(0px, "+e.maxContentWidth+"px, "+e.maxContentHeight+"px, 0px)"}),g.each(function(){return a(this).css({zIndex:j}),j--}),i.css({left:0}),k.css({right:0}),m.css({top:0}),f.css({bottom:0}),l.draggable({containment:"parent",drag:function(a,b){return c(e,b.position.left,b.position.top,!1)}}),e.restrictAxis&&l.draggable("option","axis",e.restrictAxis),l.on({touchmove:function(a){}})})},animate:function(b){return this.each(function(){var d,e,f;if(a(this).data("spaceFrame"))return d=a(this).data("spaceFrame").target,e=b[0],f=b[1],c(d,e,f,!0)})},refresh:function(){return this.each(function(){var b;return b=a(this),a(this).data("spaceFrame")&&b.data("spaceFrame",null),b.spaceFrame("init")})},destroy:function(){return this.each(function(){var b;return b=a(this),b.find(".space-scrubber").hide(),b.find(".space-panel").css("clip",""),b.data("spaceFrame",null)})}},a.fn.spaceFrame=function(b){return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):typeof b=="object"||!b?d.init.apply(this,arguments):a.error("Method "+b+" does not exist for the spaceFrame")},c=function(a,c,d,e){e==null&&(e=!0),a.restrictAxis==="x"?(b(a.panelOne,0,c,a.maxContentHeight,0,e),b(a.panelTwo,0,a.maxContentWidth,a.maxContentHeight,c,e)):a.restrictAxis==="y"?(b(a.panelOne,0,a.maxContentWidth,d,0,e),b(a.panelTwo,d,a.maxContentWidth,a.maxContentHeight,0,e)):(b(a.panelOne,0,c,d,0,e),b(a.panelTwo,0,a.maxContentWidth,d,c,e),b(a.panelThree,d,c,a.maxContentHeight,0,e),b(a.panelFour,d,a.maxContentWidth,a.maxContentHeight,c,e));if(e===!0)return a.find(".space-scrubber").animate({top:c,left:d},a.options.speed)},b=function(a,b,c,d,e,f){var g,h;return h=a.parent().data("space-frame").target,g=function(a){return a.css({clip:"rect("+b+"px, "+c+"px, "+d+"px, "+e+"px)"})},f===!0?a.stop(!0).animate({clip:"rect("+b+"px, "+c+"px, "+d+"px, "+e+"px)"},{duration:h.options.speed,step:function(f,h){var i,j,k;return i=/rect\(([0-9.]{1,})(px|em)[,]? ([0-9.]{1,})(px|em)[,]? ([0-9.]{1,})(px|em)[,]? ([0-9.]{1,})(px|em)\)/,k=h.start.match(i),j=h.end.match(i),b=parseInt(k[1],10)+h.pos*(parseInt(j[1],10)-parseInt(k[1],10)),c=parseInt(k[3],10)+h.pos*(parseInt(j[3],10)-parseInt(k[3],10)),d=parseInt(k[5],10)+h.pos*(parseInt(j[5],10)-parseInt(k[5],10)),e=parseInt(k[7],10)+h.pos*(parseInt(j[7],10)-parseInt(k[7],10)),g(a)}}):g(a)}}(jQuery);