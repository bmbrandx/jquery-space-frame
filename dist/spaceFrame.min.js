/*! Space Frame - v0.1.0 - 2012-08-22
* https://github.com/brewster1134/jquery-space-frame
* Copyright (c) 2012 Ryan Brewster; Licensed MIT */
var console;window.console||(console={log:function(){}}),function(a){var b,c,d,e;return d={init:function(b){return this.each(function(){var b,d,e,f,g,h,i,j,k;b=a(this),f=b.data("space-frame");if(!f)return b.data("space-frame",{target:b}),j=b.find(".space-scrubber"),e=b.find(".space-panel"),b.panelOne=a(e.get(0)),b.panelTwo=a(e.get(1)),b.panelThree=a(e.get(2)),b.panelFour=a(e.get(3)),g=b.panelOne.add(b.panelThree),i=b.panelTwo.add(b.panelFour),k=b.panelOne.add(b.panelTwo),d=b.panelThree.add(b.panelFour),b.maxContentWidth=null,b.maxContentHeight=null,h=e.length,b.hasClass("x")?(e.length!==2&&console.warn("There should only be 2 panels for an x axis space frame!"),b.restrictAxis="x"):b.hasClass("y")&&(e.length!==2&&console.warn("There should only be 2 panels for a y axis space frame!"),b.restrictAxis="y"),b.css({width:function(){return e.each(function(){if(!a(this).is(":empty"))return b.maxContentWidth=Math.max(b.maxContentWidth,a(this).width())}),b.maxContentWidth},height:function(){return e.each(function(){if(!a(this).is(":empty"))return b.maxContentHeight=Math.max(b.maxContentHeight,a(this).height())}),b.maxContentHeight}}),j.css({display:"block",marginTop:j.height()/2*-1,marginBottom:j.height()/2*-1,marginLeft:j.width()/2*-1,marginRight:j.width()/2*-1,top:b.maxContentHeight,left:b.maxContentWidth}),e.css({clip:"rect(0px, "+b.maxContentWidth+"px, "+b.maxContentHeight+"px, 0px)"}),e.each(function(){return a(this).css({zIndex:h}),h--}),g.css({left:0}),i.css({right:0}),k.css({top:0}),d.css({bottom:0}),j.draggable({containment:"parent",drag:function(a,d){return c(b,d.position.left,d.position.top,!1)}}),b.restrictAxis&&j.draggable("option","axis",b.restrictAxis),j.on({touchmove:function(a){}})})},animate:function(b){return this.each(function(){var d,e,f;return d=a(this).data("spaceFrame").target,e=b[0],f=b[1],c(d,e,f,!0)})},refresh:function(){return this.each(function(){var b;return b=a(this).data("spaceFrame").target,b.data("spaceFrame",null),b.spaceFrame("init")})},destroy:function(){return this.each(function(){var b;return b=a(this).data("spaceFrame").target,b.find(".space-scrubber").hide(),b.find(".space-panel").css("clip","")})}},a.fn.spaceFrame=function(b){return d[b]?d[b].apply(this,Array.prototype.slice.call(arguments,1)):typeof b=="object"||!b?d.init.apply(this,arguments):a.error("Method "+b+" does not exist for the spaceFrame")},e=function(a){return console.log(a.data("spaceFrame"))},c=function(a,c,d,e){e==null&&(e=!0),a.restrictAxis==="x"?(b(a.panelOne,0,c,a.maxContentHeight,0,e),b(a.panelTwo,0,a.maxContentWidth,a.maxContentHeight,c,e)):a.restrictAxis==="y"?(b(a.panelOne,0,a.maxContentWidth,d,0,e),b(a.panelTwo,d,a.maxContentWidth,a.maxContentHeight,0,e)):(b(a.panelOne,0,c,d,0,e),b(a.panelTwo,0,a.maxContentWidth,d,c,e),b(a.panelThree,d,c,a.maxContentHeight,0,e),b(a.panelFour,d,a.maxContentWidth,a.maxContentHeight,c,e));if(e===!0)return a.find(".space-scrubber").animate({top:c,left:d})},b=function(b,c,d,e,f,g){var h,i;return h=function(a){return a.css({clip:"rect("+c+"px, "+d+"px, "+e+"px, "+f+"px)"})},g===!0?(i=a(b.parent()).find(".space-scrubber"),b.stop().animate({clip:"rect("+c+"px, "+d+"px, "+e+"px, "+f+"px)"},{step:function(a,g){var i,j,k;return i=/rect\(([0-9.]{1,})(px|em)[,]? ([0-9.]{1,})(px|em)[,]? ([0-9.]{1,})(px|em)[,]? ([0-9.]{1,})(px|em)\)/,k=g.start.match(i),j=g.end.match(i),c=parseInt(k[1],10)+g.pos*(parseInt(j[1],10)-parseInt(k[1],10)),d=parseInt(k[3],10)+g.pos*(parseInt(j[3],10)-parseInt(k[3],10)),e=parseInt(k[5],10)+g.pos*(parseInt(j[5],10)-parseInt(k[5],10)),f=parseInt(k[7],10)+g.pos*(parseInt(j[7],10)-parseInt(k[7],10)),h(b)}},1e4)):h(b)}}(jQuery);